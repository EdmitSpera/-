# 酷狗
### 十亿个数如何取前100个大的数
- 堆排序
  - 初始化一个大小为100的大根堆
  - 扫描十亿个数，依次加到大根堆。当大根堆中的数为100个时，如果即将要加入的数小于堆顶的数，则丢弃。
  - 时间复杂度O(nlog100) 省略常数则O(n)
- 快排
  - 分治思想 根据求得的partation_Index来不断划分 得到有序的数
  - 求前一百
### 双端队列能否实现二分查找
- 跳表实现：不断在链表上级建立索引，从而加速查找 达到O(logn)的查找时间复杂度
### 服务的熔断、限流、降级
#### 熔断
- 微服务架构中服务节点中可能存在服务链，当某一个服务出现异常时，可能会造成请求的堆积，逐渐导致服务均不可用，也就是服务雪崩
- 监听服务节点的指标（响应异常、响应时间），达到某阈值暂时关闭服务节点，称为服务的熔断，将请求负载到其他服务中。
- 后期轮询熔断的服务节点，如果响应正常，则逐渐分发流量，恢复服务节点的运行
#### 限流
高并发场景为保障服务的可用性，从请求端的角度进行限流
- 令牌桶：均匀地发放特定数量的token令牌，放到具有限定大小的桶中，请求只有在令牌桶中拿到token令牌后才能继续请求下面的服务。适用于精细控制请求频率的场景。
- 漏桶：本质类似消息队列，存在限定数量的桶容纳并发请求，均匀地将桶里的请求分发到服务节点。
- 滑动时间窗口计数：解决固定窗口计数存在的临界两倍请求的限流失效导致的流量突刺问题。
### http和TCP和UDP能否绑定到同一个端口?
是的，TCP 和 UDP 可以绑定到同一个端口号，但它们处理的流量类型不同。TCP 是面向连接的协议，而 UDP 是无连接的协议。操作系统可以同时在相同的端口号上为这两种协议分配不同的套接字（sockets）。
### 如果linux中出现了性能问题，可能是什么问题，如何使用命令查找出该问题
### 进程间通信的方式
- 管程通信
- 信号量机制
- 互斥锁访问临界区
- 消息队列
- Socket嵌套字
### redis的数据类型
- String:值缓存、session会话缓存
- List:消息队列
- Set:关注列表 好友列表 粉丝列表
- Hash:ip限流 配合过期时间
- Sort Set:排行榜 热榜
### redis的应用场景
- 缓存加速
- 消息队列
- ip短暂限流、永久封禁
- 分布式锁 
- 短链接服务
### redis和mysql一致性问题如何解决
- 消息队列双写:使用消息队列，在更新数据库的同时紧跟着更新缓存的操作
### 如何解决幂等性问题
- 维护操作的唯一标识，利用Redis中的NX来进行操作的缓存，来保障同类型操作的一次请求
- 数据库唯一约束UNIQUE来保证幂等
- 在Redis和mysql中维护操作的幂等令牌，通过乐观锁的方式对操作进行无锁校验，如果令牌相同则操作
### 队列中出现消息的积压，如何解决
- 从"去"的角度:增加消费者的数量和消费任务的效率
- 从"来"的角度:当消息队列到达某阈值时，对请求进行限流，甚至是拒绝
- 从"队列"的角度:将消息请求的性质划分为不同优先级的队列，优先消费优先级高的队列任务
### mysql存储引擎
- InnoDB:
  - 支持事务 外键约束
  - 锁的粒度小 支持行锁
- MyISAM:
  - 不支持事务 外键约束 锁的粒度到表锁
  - 性能稍高 适用于读多写少的并发场景
- Memory:
  - 数据存储在内存，服务重启丢失数据
  - 适用于数据的短期存储(缓存、临时表)，不适合长期数据存储
### mysql隔离级别
- RU 读未提交:脏读 不可重复读 幻读
- RC 读已提交:解决脏读
- RR 可重复读:MVCC复用ReadView 一定程度解决幻读
- S 序列化/串行
### 数据库并发问题
- 脏读
- 不可重复读
- 幻读
### mysql如何解决幻读
- mvcc:MVCC复用ReadView 一定程度解决幻读 根据可见性规则来确定版本是否可见
- 锁机制:行锁中的临键锁和间隙锁 并发情况下读操作中不允许插入
### 如何排查慢查询
- 开启慢日志
  - slow_query_log 1
  - slow_query_time (ms)
- explain查看执行计划
  - type:sql查找的类型
    - all 全表扫描
    - index 索引扫描
    - range 索引内范围查找
    - ref 索引内二分查找
    - eq_ref 唯一索引查找
    - const 字段
    - system
### 索引失效的场景
### 索引优化
- 主键优化
- 聚集索引 索引失效情况优化
- 回表优化 mysql新特性 索引下推
### 索引回表